<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="”robots”" content="”noindex,nofollow”" />
    <title>書籍一括検索</title>
  </head>
  <body>
    <h3>本の名前を入力(名前の一部でも可)</h3>
    <br />
    <input
      inputmode="search"
      type="text"
      placeholder="ここに本の名前を入力"
      id="BookName"
    />
    <button onclick="SearchBook()">検索</button>
    <span id="result"></span>
    <br />
    <h4 id="ujiLib"></h4>
    <br />
    <h4 id="ritsLib"></h4>
    <br />
    <!-- <h4>Bookoff</h4>
    <h4 id="Bookoff"></h4>
    <br /> -->
    <h4 id="UnivCoop"></h4>
    <br />
    <h4 id="KyotoPrifLib"></h4>
    <br />
    <div id="bookoffonline">
      (参考)<a href="https://www.bookoffonline.co.jp/book/CSfTop.jsp?bg=12">
        bookoffonlineのページ
      </a>
    </div>
  </body>
</html>

<script>
  let text_form = document.getElementById("BookName");

  text_form.addEventListener("keypress", test_ivent);

  function test_ivent(e) {
    if (e.keyCode === 13) {
      SearchBook();
    }
    return false;
  }
  var SearchBook = function () {
    const BookKey = document.getElementById("BookName");
    window.location.href = "/SearchBook/?" + BookKey.value;
  };

  window.onload = function () {
    var query = location.search;
    const BookName = query.slice(1);
    if (BookName != "") {
      var result = document.getElementById("result");
      result.innerHTML = "<p>" + decodeURI(BookName) + "　の検索結果</p>";

      var ujiLib = document.getElementById("ujiLib");
      ujiLib.innerHTML =
        "<a href='https://library.city.uji.kyoto.jp/opac/sp/results?keyword=" +
        BookName +
        "'>宇治市図書館</a>";

      var ritsLib = document.getElementById("ritsLib");
      ritsLib.innerHTML =
        "<a href='https://runners.ritsumei.ac.jp/opac/opac_search/?lang=0&amode=2&appname=Netscape&version=5&cmode=0&smode=0&kywd=" +
        BookName +
        "'>立命館大学図書館</a>";

      var ujiLib = document.getElementById("UnivCoop");
      UnivCoop.innerHTML =
        "<p class='detail'>(生協ページは表示に時間がかかります)</p>" +
        "<a href='https://online.univ.coop/book/products/?search%5Bcat%5D=0&search%5Bkeyw%5D=" +
        BookName +
        "'>大学生協</a>";

      var ujiLib = document.getElementById("KyotoPrifLib");
      KyotoPrifLib.innerHTML =
        "<a href='https://www.library.pref.kyoto.jp/cross/cross.html?q=" +
        BookName +
        "&filter=3' target='_blank' rel='noopener noreferrer'>京都府図書館(南部エリア)</a>";
    }
  };
</script>

<style>
  body {
    line-height: 1;
    font-size: larger;
  }
  .detail {
    font-size: medium;
  }
  #bookoffonline {
    margin-top: 70px;
  }
</style>
